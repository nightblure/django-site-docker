{% extends 'base.html' %}

{% block title %}
{{ title }}
{% endblock %}

{% block sidebar %}
{% include 'inc/_sidebar.html' %}
{% endblock %}

{% block content %}

{% for news_item in news %}

<div class="card mb-3">

    <div class="card-header">
        –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{ news_item.category }}
    </div>

    <div class="card-body">
        <div class="media d-flex">

            {% if news_item.image %}
            <img src="{{ news_item.image.url }}" alt="" height="300" width="300" class="me-3">
            {% else %}

            {% endif %}

            <div class="media-body">

                <h5 class="card-title">
                    <a href="{{ news_item.get_absolute_url }}" style="text-decoration: none; color: black"> {{ news_item.title|safe }} </a>
                </h5>

                <p class="card-text"> {{ news_item.content|safe|truncatewords:50 }} </p>

                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}

                    {% if news_item.pk in user_liked_posts %}
                    <a href="{% url 'unlike_route' news_item.pk %}" class="btn btn-danger" name="unlike"> üñ§ unlike </a>
                    {% else %}
                    <a href="{% url 'like_route' news_item.pk %}" class="btn btn-danger" name="like"> ‚ô° like </a>
                    {% endif %}

                    <a href="{{ news_item.get_absolute_url }}" class="btn btn-primary"> Read more... </a>

                </form>

            </div>

        </div>


    </div>

    <div class="card-footer text-muted">
        {{ news_item.user }}, {{ news_item.created_at|date:"Y-m-d H:i" }}
        <span style="float:right" class="badge rounded-pill text-bg-primary"> {{ news_item.views_count }} views </span>
        <span style="float:right; margin-right: 10px" class="badge rounded-pill text-bg-danger"> {{ news_likes|dict_value:news_item.pk }} likes </span>
    </div>

</div>

{% endfor %}

{% endblock %}